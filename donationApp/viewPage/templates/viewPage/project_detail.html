<!-- project_detail.html -->
{% extends 'layout/base.html' %}

{% block content %}
  <h1>Project Detail</h1>

  <!-- Display Project Details -->
  <div class="project-container">
    <h2>{{ project.title }}</h2>
    <!-- Project pictures -->
    <div class="slider">
      {% for picture in project.pictures.all %}
        <div><img src="{{ picture.path.url }}" alt="Slider Image"></div>
      {% endfor %}
    </div>
    <p class="project-description">{{ project.details }}</p>
  </div>

  <!-- Display Comments -->
  <h3>Comments</h3>
  {% for comment in comments %}
    <div class="comment-container">
      <p>{{ comment.content }}</p>
      <p>Posted by: {{ comment.user.username }}</p>
      <p>Posted at: {{ comment.created_at }}</p>
      <!-- Display Replies -->
      <h4>Replies</h4>
      {% for reply in comment.replies.all %}
        <div class="reply-container">
          <p>{{ reply.content }}</p>
          <p>Posted by: {{ reply.user.username }}</p>
          <p>Posted at: {{ reply.created_at }}</p>
        </div>
      {% empty %}
        <p>No replies yet.</p>
      {% endfor %}
    </div>
  {% empty %}
    <p>No comments yet.</p>
  {% endfor %}

  <!-- Comment form -->
  <h3>Add a Comment</h3>
  <form method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Submit Comment</button>
  </form>

  <!-- Report project form -->
  <h3>Report Project</h3>
  <form method="post">
    {% csrf_token %}
    {{ report_form.as_p }}
    <input type="hidden" name="project_id" value="{{ project.id }}">
    <button type="submit">Report</button>
  </form>
{% endblock %}